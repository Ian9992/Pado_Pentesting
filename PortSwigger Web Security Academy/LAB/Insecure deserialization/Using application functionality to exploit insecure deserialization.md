# Using application functionality to exploit insecure deserialization
* This lab uses a serialization-based session mechanism. A certain feature invokes a dangerous method on data provided in a serialized object. To solve the lab, edit the serialized object in the session cookie and use it to delete the `morale.txt` file from Carlos's home directory.
	* You can log in to your own account using the following credentials: `wiener:peter`
	* You also hav access to a backup account `gregg:rosebud`
### 1. Enumerate the "Delete account" functionality
* Send the reqeust to Burp repeater for enumeration, and enumerate the cookie using the Burp inspector.

![11](https://user-images.githubusercontent.com/53956303/154599989-3016ec79-1373-4703-b474-d3c8ae75a816.png)
* it looks a PHP serialization format.
	* The cookie include the `avatar_link` location

### 2. Capture the request when delete "gregg"
![12](https://user-images.githubusercontent.com/53956303/154601003-e2cfc429-0475-4336-bdf5-6e8ca3fecd3f.png)
* use the Burp inspector to modify the deleted file
	* `s:18:"users/gregg/avatar";` to `s:23:"/home/carlos/morale.txt";`

![13](https://user-images.githubusercontent.com/53956303/154601240-0b36986c-47da-4754-ab67-832bbbc73ddf.png)
* Click "Apply changes" and forward the reqeust.
	* As a result, the target file is deleted and the lab is solved.

![14](https://user-images.githubusercontent.com/53956303/154601350-982a11d1-4746-4ef3-b913-c6ce83d228da.png)
