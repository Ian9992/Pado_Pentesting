# Reflected DOM XSS
* This lab deminstrates a reflected DOM vulnerability. Reflected DOM vulnerabilities occur when the server-side application processes data from a request and echoes the data in the response.
	* A script on the page then processes the reflected data in an unsafe way, ultimately writing it to a danferous sink.
	* To solve this lab, create an injection that calls the `alert()` function

### 1. Capture the request when use the search bar
![73](https://user-images.githubusercontent.com/53956303/153314374-480d0441-a4ce-41e6-bb37-89a58ed57b9c.png)
![image](https://user-images.githubusercontent.com/53956303/153315743-687dc967-ad01-4ed6-b954-098518ee71b8.png)

* Then, forward the request. From the result, a JSON file "searchResults.js" is found

![74](https://user-images.githubusercontent.com/53956303/153314650-efc5706c-6324-4a2b-8df8-157742578347.png)
### 2. Enumerate the "searchResults.js"
* From the Site Map, Open the file to enumerate.
	 * From the enumeration, `eval()` function call is found

![75](https://user-images.githubusercontent.com/53956303/153314953-43f405df-9f4f-49e3-abc7-89bd300034cd.png)

### 3. Injet a XSS attack
* SInce backslahs is not being escaped, use it to inject a XSS exploit.
```javaScript
\"-alert(1)}//
```
* As tou have injected a backslash and the site isn't escaping them, when the JSON response attempts to escape the opening double-quotes character, it adds a second backslash. The resulting double-backslash causes the escaping to be effectively canceled out.
	* This means that the double-quotes are processed unescaped, which closes the string that should contain the search term.
* An arithmetic operator (subtraction in this case) is then used to separate the expressions before the `alert()` function is called. 
	* Finally, a closing curly bracket and two forward slashes close the JSON object early and comment out what would have been the rest of the object. As a result, the response is generated as follows.
```JSON
{"searchTerm":"\\"-alert(1)}//", "results":[]}
```
* As a result, an alert is popped up

![76](https://user-images.githubusercontent.com/53956303/153315871-77be860b-6184-4acf-8701-eebaecad435a.png)
* And the response will be look like this

![77](https://user-images.githubusercontent.com/53956303/153315950-03b6e4ef-3159-4b2e-aa7a-21004ace3be6.png)

