# Broken brute-force protection, IP blcok
* This lab is vulnerable due to a logic flaw in its password brute-force protection. To solve the lab, brute-forcethe victim's password, then log in and access their account page.
	* Your credentials: `wiener:peter`
	* Victim's username: `carlos`, use the provided 
### 1. Capture the request when log in
* `POST /login` is captured. Send it to Intruder and create a Pitchfork attack with payload positions in both the `username` and `password` parameters.

![34](https://user-images.githubusercontent.com/53956303/160718559-87d0a1fb-07eb-4455-bfe4-c3e8875c97a5.png)
### 2. Set the exploit options
* On the **Resource pool** tab, add the attack to a resource pool with **Maximum concurrent requests** set to 1. By only sending one request at a time, an attacker can ensure that the login attempts are sent to the server in the correct order.

![35](https://user-images.githubusercontent.com/53956303/160718846-c5ea8004-e84b-4fcd-93de-45a6cb9c774b.png)
* On the **Payload** tab, select payload set 1. Add a list thtat alternates the `wiener` and `carlos` repeated 100 times.

![36](https://user-images.githubusercontent.com/53956303/160719373-5243b3a2-a6ca-409f-8391-bc8133c1b02e.png)
* On the payload set 2, add a password candidates. add the `wiener`'s password `peter` before each one.
	* Through the matching valid credentials, the attacker can avoid the login blocking.

![37](https://user-images.githubusercontent.com/53956303/160719983-372cd23d-d1c2-4eab-b44b-1d60381389b2.png)
### 3. Start the attack and sort the result
* When the attack is finished, filter the result to hide response with a 200 status code. From the result, there has only one payload has 302 response with the username "carlos".

![38](https://user-images.githubusercontent.com/53956303/160720419-f0a015c6-81a3-4a0a-9f90-c494e26dd571.png)
* With obtained credentials, access to the account is granted. The lab is solved.

![39](https://user-images.githubusercontent.com/53956303/160720491-bd699621-82c9-45f3-ab8c-66011e8fe01a.png)
