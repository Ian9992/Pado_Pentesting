<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="keywords" content="wordpress, wpscan, jar_files"/>
<title>Blocky</title>


<link rel="stylesheet" href="./Blocky_assets/globalTheme.css" type="text/css"/>
<link rel="stylesheet" href="./Blocky_assets/previewStyle.css" type="text/css"/>
<link rel="stylesheet" href="./Blocky_assets/remarkAdmonitions.css" type="text/css"/>
<link rel="stylesheet" href="./Blocky_assets/material.css" type="text/css"/>
<link rel="stylesheet" href="./Blocky_assets/katex.min.css" type="text/css"/>

<!-- Print Styles -->
<style media="print">
pre code {
  white-space: pre-wrap;
}
</style>


</head>
<body>
  
<div class="dark">
  <h2 data-line="1">Reconnaissance</h2>
<h3 data-line="2">initial Port Scan</h3>
<pre data-line="3" class="cm-s-material CodeMirror language-bash" data-raw="sudo /opt/nmapAutomator/nmapAutomator.sh 10.10.10.37 All
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="3"><span class="cm-builtin">sudo</span><span> </span><span>/opt</span><span>/nmapAutomator</span><span>/nmapAutomator</span><span>.sh</span><span> </span><span class="cm-number">10</span><span>.10</span><span>.10</span><span>.37</span><span> </span><span>All</span><span>
</span></code></pre>
<ul data-line="6">
<li data-line="6">Open Ports<ul data-line="7">
<li data-line="7"><pre data-line="7" class="cm-s-material CodeMirror" data-raw="21  ftp ProFTPD 1.3.5a
22  SSH OpenSSH 7.2p2
80  http    Apache httpd 2.4.18
25565   Minecraft   Minecraft 1.11.2 (Protocol 127, Message: A Minecraft Server, users: 0/20)
"><code data-line="7">21  ftp ProFTPD 1.3.5a
22  SSH OpenSSH 7.2p2
80  http    Apache httpd 2.4.18
25565   Minecraft   Minecraft 1.11.2 (Protocol 127, Message: A Minecraft Server, users: 0/20)
</code></pre></li>
</ul></li>
</ul>
<h2 data-line="11">Enumeration</h2>
<h3 data-line="12">Port 80</h3>
<ul data-line="13">
<li data-line="13">From a web browser, a web page for Minecraft is found<pre data-line="14" class="cm-s-material CodeMirror" data-raw="* From the web page, some information that the page is powered by WordPress is found. 
"><code data-line="14">* From the web page, some information that the page is powered by WordPress is found. 
</code></pre><img src="./Blocky_assets/attachments/image-kgvbr0p3.png" alt="1" data-line="15"></li>
</ul>
<h4 data-line="16">Gobuster on Port 80</h4>
<pre data-line="17" class="cm-s-material CodeMirror language-bash" data-raw="gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt -u http://10.10.10.37
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="17"><span>gobuster</span><span> </span><span>dir</span><span> </span><span class="cm-attribute">-w</span><span> </span><span>/usr</span><span>/share</span><span>/wordlists</span><span>/dirbuster</span><span>/directory-list-lowercase-2</span><span>.3-medium</span><span>.txt</span><span> </span><span class="cm-attribute">-u</span><span> </span><span>http</span><span>:</span><span>/</span><span>/10</span><span>.10</span><span>.10</span><span>.37</span><span>
</span></code></pre>
<ul data-line="20">
<li data-line="20">Result<ul data-line="21">
<li data-line="21"><pre data-line="21" class="cm-s-material CodeMirror" data-raw="/wiki
/wp-content
/plugins
/wp-includes
/javascript
/wp-admin
/phpmyadmin
/server-status
"><code data-line="21">/wiki
/wp-content
/plugins
/wp-includes
/javascript
/wp-admin
/phpmyadmin
/server-status
</code></pre></li>
</ul></li>
</ul>
<h4 data-line="29">Wpscan</h4>
<pre data-line="30" class="cm-s-material CodeMirror language-bash" data-raw="wpscan --url http://10.10.10.37 --enumerate p,u --plugins-detection aggressive
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="30"><span>wpscan</span><span> </span><span class="cm-attribute">--url</span><span> </span><span>http</span><span>:</span><span>/</span><span>/10</span><span>.10</span><span>.10</span><span>.37</span><span> </span><span class="cm-attribute">--enumerate</span><span> </span><span>p</span><span>,u</span><span> </span><span class="cm-attribute">--plugins</span><span class="cm-attribute">-detection</span><span> </span><span>aggressive</span><span>
</span></code></pre>
<ul data-line="33">
<li data-line="33">From the result, a username is found<ul data-line="34">
<li data-line="34"><pre data-line="34" class="cm-s-material CodeMirror" data-raw="notch
"><code data-line="34">notch
</code></pre></li>
</ul></li>
</ul>
<h4 data-line="35">/wp-admin</h4>
<ul data-line="36">
<li data-line="36">From the /wp-admin, a admin login page is found
<img src="./Blocky_assets/attachments/image-kgvcd19f.png" alt="2" data-line="37"></li>
</ul>
<h4 data-line="38">/plugins</h4>
<ul data-line="39">
<li data-line="39">From this directory, 2 jar files are found
<img src="./Blocky_assets/attachments/image-kgvcexly.png" alt="3" data-line="40"></li>
</ul>
<h3 data-line="42">File Enumeration</h3>
<ul data-line="43">
<li data-line="43">Extract jar files</li>
</ul>
<pre data-line="44" class="cm-s-material CodeMirror language-bash" data-raw="jar xvf BlockyCore.jar
        griefprevention-1.11.2-3.1.1.298.jar
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="44"><span>jar</span><span> </span><span>xvf</span><span> </span><span>BlockyCore</span><span>.jar</span><span>
</span><span>        </span><span>griefprevention-1</span><span>.11</span><span>.2-3</span><span>.1</span><span>.1</span><span>.298</span><span>.jar</span><span>
</span></code></pre>
<ul data-line="48">
<li data-line="48">From the come/myfirstplugins directoyr, a file "BlockyCore.class" is found<ul data-line="49">
<li data-line="49">Inside the file, a possible credentials are found<pre data-line="50" class="cm-s-material CodeMirror" data-raw="*   root    /   8YsqfCTnvxAUeduzjNSXe22
"><code data-line="50">*   root    /   8YsqfCTnvxAUeduzjNSXe22
</code></pre><img src="./Blocky_assets/attachments/image-kgvcnn9z.png" alt="4" data-line="51"> </li>
</ul></li>
</ul>
<h3 data-line="52">Try to Connect SSH</h3>
<ul data-line="53">
<li data-line="53">Since the SSH is running on port 22 on the target machine, Use Obtained credentials to connect</li>
</ul>
<pre data-line="54" class="cm-s-material CodeMirror language-bash" data-raw="ssh root@10.10.10.37
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="54"><span class="cm-builtin">ssh</span><span> </span><span>root</span><span>@10</span><span>.10</span><span>.10</span><span>.37</span><span>
</span></code></pre>
<ul data-line="57">
<li data-line="57">It does not work, try the username obtained from wpscan</li>
<li data-line="58">As a result, an SSH shell as "notch" is open</li>
</ul>
<h2 data-line="59">Privilege Escalation</h2>
<h3 data-line="60">See the privileges</h3>
<pre data-line="61" class="cm-s-material CodeMirror language-bash" data-raw="sudo -l
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="61"><span class="cm-builtin">sudo</span><span> </span><span class="cm-attribute">-l</span><span>
</span></code></pre>
<ul data-line="64">
<li data-line="64">The notch user has all privileges to use sudo without password.
<img src="./Blocky_assets/attachments/image-kgvcveyt.png" alt="5" data-line="65"></li>
</ul>
<pre data-line="66" class="cm-s-material CodeMirror language-bash" data-raw="sudo bash
" data-ext="sh" data-mime="text/x-sh"><code class="language-bash" data-line="66"><span class="cm-builtin">sudo</span><span> </span><span class="cm-builtin">bash</span><span>
</span></code></pre>
<ul data-line="69">
<li data-line="69">As a result, a root shell is open.</li>
</ul>

</div>
</body>
</html>
